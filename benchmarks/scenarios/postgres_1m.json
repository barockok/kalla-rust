{
  "name": "postgres_1m",
  "source_type": "postgres",
  "rows": 1000000,
  "match_sql": "SELECT i.*, p.* FROM left_src i JOIN right_src p ON i.invoice_id = p.reference_number AND tolerance_match(i.amount, p.paid_amount, 0.02)",
  "sources": [
    {
      "alias": "left_src",
      "uri": "postgres://${PG_HOST}/${PG_DB}",
      "format": "postgres",
      "table": "bench_invoices"
    },
    {
      "alias": "right_src",
      "uri": "postgres://${PG_HOST}/${PG_DB}",
      "format": "postgres",
      "table": "bench_payments"
    }
  ],
  "primary_keys": {
    "left_src": ["invoice_id"],
    "right_src": ["payment_id"]
  }
}
